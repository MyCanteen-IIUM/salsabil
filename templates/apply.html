<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Postuler - {{ job.title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rtl-mobile-menu.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/apply-mobile.css') }}">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container navbar-container">
                <button class="menu-toggle" onclick="toggleMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <a href="/jobs" class="logo-link">
                    <div class="logo">
                        <img src="{{ url_for('static', filename='img/logo.jpeg') }}" alt="Logo Salsabil" class="logo-img">
                        <div class="logo-text-container">
                            <span class="logo-text">Application</span>
                            <span class="logo-subtitle">Trouvez votre prochain d√©fi</span>
                        </div>
                    </div>
                </a>
                <ul class="nav-links" id="navLinks">
                    <li><a href="https://salsabil-km.com/fr/" class="nav-link"> Accueil</a></li>
                    <li class="dropdown">
                        <a href="https://salsabil-km.com/fr/about" class="nav-link dropdown-toggle">
                            Qui sommes-nous
                            <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="https://salsabil-km.com/fr/about#history" class="dropdown-item">Histoire</a></li>
                            <li><a href="https://salsabil-km.com/fr/about#vision" class="dropdown-item">Vision</a></li>
                            <li><a href="https://salsabil-km.com/fr/about#message" class="dropdown-item">Mission</a></li>
                            <li><a href="https://salsabil-km.com/fr/about#values" class="dropdown-item">Valeurs</a></li>
                            <li><a href="https://salsabil-km.com/fr/about#objectives" class="dropdown-item">Objectifs</a></li>
                        </ul>
                    </li>
                    <li><a href="https://salsabil-km.com/fr/products" class="nav-link"> Nos produits</a></li>
                    <li><a href="https://salsabil-km.com/fr/events" class="nav-link"> √âv√©nements</a></li>
                    <li><a href="https://salsabil-km.com/fr/achievements" class="nav-link"> R√©alisations</a></li>
                    <li><a href="https://salsabil-km.com/fr/gallery" class="nav-link"> Exposition</a></li>
                    <li><a href="https://salsabil-km.com/fr/news" class="nav-link"> Nouvelles</a></li>
                    <li><a href="https://salsabil-km.com/fr/contact" class="nav-link"> Contact</a></li>
                    <li><a href="/jobs" class="nav-link active"> Postes Disponibles</a></li>
                    <li><a href="/apply_ar/{{ job.id }}" class="nav-link">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section class="apply-section">
            <div class="container">
                <div class="apply-header">
                    <h2>Postuler pour : {{ job.title }}</h2>
                    <p class="job-info">
                        <span>üìÅ {{ job.department }}</span>
                        <span>üìç {{ job.location }}</span>
                        <span class="job-type {{ job.type.lower() }}">{{ job.type }}</span>
                    </p>
                </div>

                <div class="apply-content">
                    <div class="job-summary">
                        <h3>√Ä propos du poste</h3>
                        <p>{{ job.description }}</p>
                        <h4>Comp√©tences requises :</h4>
                        <ul>
                            {% for req in job.requirements %}
                            <li>{{ req }}</li>
                            {% endfor %}
                        </ul>
                        {% if job.langues_requises %}
                        <div class="job-languages-apply">
                            <h4>üåê Langues requises :</h4>
                            <div class="language-tags-apply">
                                {% set langues = job.langues_requises.split(', ') %}
                                {% for langue in langues %}
                                <span class="language-tag-apply">
                                    {% if langue == 'Arabe' %}üá∏üá¶
                                    {% elif langue == 'Anglais' %}üá¨üáß
                                    {% elif langue == 'Fran√ßais' %}üá´üá∑
                                    {% endif %}
                                    {{ langue }}
                                </span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <div class="application-form">
                        <h3>Votre Candidature</h3>
                        
                        <!-- Progress Steps -->
                        <div class="progress-steps">
                            <div class="step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-label">Informations personnelles</div>
                            </div>
                            <div class="step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-label">Formation</div>
                            </div>
                            <div class="step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-label">Langues</div>
                            </div>
                            <div class="step" data-step="4">
                                <div class="step-number">4</div>
                                <div class="step-label">Sant√©</div>
                            </div>
                            {% if job.id == 0 %}
                            <div class="step" data-step="5">
                                <div class="step-number">5</div>
                                <div class="step-label">Choix de travail</div>
                            </div>
                            {% endif %}
                            <div class="step" data-step="{% if job.id == 0 %}6{% else %}5{% endif %}">
                                <div class="step-number">{% if job.id == 0 %}6{% else %}5{% endif %}</div>
                                <div class="step-label">Documents</div>
                            </div>
                        </div>

                        <form method="POST" enctype="multipart/form-data" id="applicationForm">
                            <!-- Section 1: Informations personnelles -->
                            <div class="form-section active" data-section="1">
                                <h4 class="section-title">üìã Informations personnelles</h4>

                            <div class="form-group">
                                <label for="prenom">Pr√©nom *</label>
                                <input type="text" id="prenom" name="prenom" required placeholder="Jean">
                            </div>

                            <div class="form-group">
                                <label for="nom">Nom *</label>
                                <input type="text" id="nom" name="nom" required placeholder="Dupont">
                            </div>

                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input type="email" id="email" name="email" required placeholder="jean.dupont@email.com">
                            </div>

                            <div class="form-group">
                                <label for="telephone">T√©l√©phone *</label>
                                <input type="tel" id="telephone" name="telephone" required placeholder="+212 6 12 34 56 78">
                            </div>

                            <div class="form-group">
                                <label for="adresse">Adresse *</label>
                                <input type="text" id="adresse" name="adresse" required placeholder="Rue, Quartier, Ville">
                                <small>Indiquez votre adresse (rue, quartier, ville)</small>
                            </div>

                            <div class="form-group">
                                <label for="pays">Pays *</label>
                                <select id="pays" name="pays" required onchange="updateRegions()">
                                    <option value="">-- S√©lectionnez une √Æle --</option>
                                    <option value="Grande Comore">Grande Comore</option>
                                    <option value="Anjouan">Anjouan</option>
                                    <option value="Moh√©li">Moh√©li</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="region">R√©gion *</label>
                                <select id="region" name="region" required disabled>
                                    <option value="">-- S√©lectionnez d'abord un pays --</option>
                                </select>
                                <small>Choisissez d'abord votre √Æle pour voir les r√©gions disponibles</small>
                            </div>

                            <div class="form-group">
                                <label for="sexe">Sexe *</label>
                                <select id="sexe" name="sexe" required>
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="Masculin">Masculin</option>
                                    <option value="F√©minin">F√©minin</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="lieu_naissance">Lieu de naissance *</label>
                                <input type="text" id="lieu_naissance" name="lieu_naissance" required placeholder="Ville, Pays">
                            </div>

                            <div class="form-group">
                                <label for="date_naissance">Date de naissance *</label>
                                <input type="date" id="date_naissance" name="date_naissance" required>
                            </div>

                            <div class="form-group">
                                <label for="nationalite">Nationalit√© *</label>
                                <select id="nationalite" name="nationalite" required>
                                    <option value="">-- S√©lectionnez votre nationalit√© --</option>
                                    <option value="Comorienne">Comorienne</option>
                                    <optgroup label="Afrique">
                                        <option value="Alg√©rienne">Alg√©rienne</option>
                                        <option value="Angolaise">Angolaise</option>
                                        <option value="B√©ninoise">B√©ninoise</option>
                                        <option value="Botswanaise">Botswanaise</option>
                                        <option value="Burkinab√©">Burkinab√©</option>
                                        <option value="Burundaise">Burundaise</option>
                                        <option value="Camerounaise">Camerounaise</option>
                                        <option value="Cap-Verdienne">Cap-Verdienne</option>
                                        <option value="Centrafricaine">Centrafricaine</option>
                                        <option value="Tchadienne">Tchadienne</option>
                                        <option value="Congolaise (RDC)">Congolaise (RDC)</option>
                                        <option value="Congolaise (RC)">Congolaise (RC)</option>
                                        <option value="Djiboutienne">Djiboutienne</option>
                                        <option value="√âgyptienne">√âgyptienne</option>
                                        <option value="√âquato-guin√©enne">√âquato-guin√©enne</option>
                                        <option value="√ârythr√©enne">√ârythr√©enne</option>
                                        <option value="√âthiopienne">√âthiopienne</option>
                                        <option value="Gabonaise">Gabonaise</option>
                                        <option value="Gambienne">Gambienne</option>
                                        <option value="Ghan√©enne">Ghan√©enne</option>
                                        <option value="Guin√©enne">Guin√©enne</option>
                                        <option value="Bissau-Guin√©enne">Bissau-Guin√©enne</option>
                                        <option value="Ivoirienne">Ivoirienne</option>
                                        <option value="K√©nyane">K√©nyane</option>
                                        <option value="Lesothane">Lesothane</option>
                                        <option value="Lib√©rienne">Lib√©rienne</option>
                                        <option value="Libyenne">Libyenne</option>
                                        <option value="Malgache">Malgache</option>
                                        <option value="Malawienne">Malawienne</option>
                                        <option value="Malienne">Malienne</option>
                                        <option value="Mauritanienne">Mauritanienne</option>
                                        <option value="Mauricienne">Mauricienne</option>
                                        <option value="Marocaine">Marocaine</option>
                                        <option value="Mozambicaine">Mozambicaine</option>
                                        <option value="Namibienne">Namibienne</option>
                                        <option value="Nig√©rienne">Nig√©rienne</option>
                                        <option value="Nig√©riane">Nig√©riane</option>
                                        <option value="Rwandaise">Rwandaise</option>
                                        <option value="Sao-tom√©enne">Sao-tom√©enne</option>
                                        <option value="S√©n√©galaise">S√©n√©galaise</option>
                                        <option value="Seychelloise">Seychelloise</option>
                                        <option value="Sierra-l√©onaise">Sierra-l√©onaise</option>
                                        <option value="Somalienne">Somalienne</option>
                                        <option value="Sud-africaine">Sud-africaine</option>
                                        <option value="Sud-soudanaise">Sud-soudanaise</option>
                                        <option value="Soudanaise">Soudanaise</option>
                                        <option value="Swazi">Swazi</option>
                                        <option value="Tanzanienne">Tanzanienne</option>
                                        <option value="Togolaise">Togolaise</option>
                                        <option value="Tunisienne">Tunisienne</option>
                                        <option value="Ougandaise">Ougandaise</option>
                                        <option value="Zambienne">Zambienne</option>
                                        <option value="Zimbabw√©enne">Zimbabw√©enne</option>
                                    </optgroup>
                                    <optgroup label="Asie">
                                        <option value="Afghane">Afghane</option>
                                        <option value="Saoudienne">Saoudienne</option>
                                        <option value="Bahre√Ønie">Bahre√Ønie</option>
                                        <option value="Bangladaise">Bangladaise</option>
                                        <option value="Birmane">Birmane</option>
                                        <option value="Brun√©ienne">Brun√©ienne</option>
                                        <option value="Cambodgienne">Cambodgienne</option>
                                        <option value="Chinoise">Chinoise</option>
                                        <option value="Cor√©enne (Nord)">Cor√©enne (Nord)</option>
                                        <option value="Cor√©enne (Sud)">Cor√©enne (Sud)</option>
                                        <option value="√âmiratie">√âmiratie</option>
                                        <option value="Indienne">Indienne</option>
                                        <option value="Indon√©sienne">Indon√©sienne</option>
                                        <option value="Irakienne">Irakienne</option>
                                        <option value="Iranienne">Iranienne</option>
                                        <option value="Isra√©lienne">Isra√©lienne</option>
                                        <option value="Japonaise">Japonaise</option>
                                        <option value="Jordanienne">Jordanienne</option>
                                        <option value="Kazakhe">Kazakhe</option>
                                        <option value="Kowe√Øtienne">Kowe√Øtienne</option>
                                        <option value="Laotienne">Laotienne</option>
                                        <option value="Libanaise">Libanaise</option>
                                        <option value="Malaisienne">Malaisienne</option>
                                        <option value="Maldivienne">Maldivienne</option>
                                        <option value="Mongole">Mongole</option>
                                        <option value="N√©palaise">N√©palaise</option>
                                        <option value="Omanaise">Omanaise</option>
                                        <option value="Pakistanaise">Pakistanaise</option>
                                        <option value="Palestinienne">Palestinienne</option>
                                        <option value="Philippine">Philippine</option>
                                        <option value="Qatarie">Qatarie</option>
                                        <option value="Singapourienne">Singapourienne</option>
                                        <option value="Sri-lankaise">Sri-lankaise</option>
                                        <option value="Syrienne">Syrienne</option>
                                        <option value="Tadjike">Tadjike</option>
                                        <option value="Ta√Øwanaise">Ta√Øwanaise</option>
                                        <option value="Tha√Ølandaise">Tha√Ølandaise</option>
                                        <option value="Timoraise">Timoraise</option>
                                        <option value="Turque">Turque</option>
                                        <option value="Turkm√®ne">Turkm√®ne</option>
                                        <option value="Ouzb√®ke">Ouzb√®ke</option>
                                        <option value="Vietnamienne">Vietnamienne</option>
                                        <option value="Y√©m√©nite">Y√©m√©nite</option>
                                    </optgroup>
                                    <optgroup label="Europe">
                                        <option value="Albanaise">Albanaise</option>
                                        <option value="Allemande">Allemande</option>
                                        <option value="Andorrane">Andorrane</option>
                                        <option value="Autrichienne">Autrichienne</option>
                                        <option value="Belge">Belge</option>
                                        <option value="Bi√©lorusse">Bi√©lorusse</option>
                                        <option value="Bosniaque">Bosniaque</option>
                                        <option value="Bulgare">Bulgare</option>
                                        <option value="Chypriote">Chypriote</option>
                                        <option value="Croate">Croate</option>
                                        <option value="Danoise">Danoise</option>
                                        <option value="Espagnole">Espagnole</option>
                                        <option value="Estonienne">Estonienne</option>
                                        <option value="Finlandaise">Finlandaise</option>
                                        <option value="Fran√ßaise">Fran√ßaise</option>
                                        <option value="Grecque">Grecque</option>
                                        <option value="Hongroise">Hongroise</option>
                                        <option value="Irlandaise">Irlandaise</option>
                                        <option value="Islandaise">Islandaise</option>
                                        <option value="Italienne">Italienne</option>
                                        <option value="Lettone">Lettone</option>
                                        <option value="Liechtensteinoise">Liechtensteinoise</option>
                                        <option value="Lituanienne">Lituanienne</option>
                                        <option value="Luxembourgeoise">Luxembourgeoise</option>
                                        <option value="Mac√©donienne">Mac√©donienne</option>
                                        <option value="Maltaise">Maltaise</option>
                                        <option value="Moldave">Moldave</option>
                                        <option value="Mon√©gasque">Mon√©gasque</option>
                                        <option value="Mont√©n√©grine">Mont√©n√©grine</option>
                                        <option value="Norv√©gienne">Norv√©gienne</option>
                                        <option value="N√©erlandaise">N√©erlandaise</option>
                                        <option value="Polonaise">Polonaise</option>
                                        <option value="Portugaise">Portugaise</option>
                                        <option value="Roumaine">Roumaine</option>
                                        <option value="Britannique">Britannique</option>
                                        <option value="Russe">Russe</option>
                                        <option value="Saint-marinaise">Saint-marinaise</option>
                                        <option value="Serbe">Serbe</option>
                                        <option value="Slovaque">Slovaque</option>
                                        <option value="Slov√®ne">Slov√®ne</option>
                                        <option value="Su√©doise">Su√©doise</option>
                                        <option value="Suisse">Suisse</option>
                                        <option value="Tch√®que">Tch√®que</option>
                                        <option value="Ukrainienne">Ukrainienne</option>
                                        <option value="Vaticane">Vaticane</option>
                                    </optgroup>
                                    <optgroup label="Am√©rique">
                                        <option value="Am√©ricaine">Am√©ricaine</option>
                                        <option value="Antiguaise et barbudienne">Antiguaise et barbudienne</option>
                                        <option value="Argentine">Argentine</option>
                                        <option value="Bahamienne">Bahamienne</option>
                                        <option value="Barbadienne">Barbadienne</option>
                                        <option value="B√©lizienne">B√©lizienne</option>
                                        <option value="Bolivienne">Bolivienne</option>
                                        <option value="Br√©silienne">Br√©silienne</option>
                                        <option value="Canadienne">Canadienne</option>
                                        <option value="Chilienne">Chilienne</option>
                                        <option value="Colombienne">Colombienne</option>
                                        <option value="Costaricaine">Costaricaine</option>
                                        <option value="Cubaine">Cubaine</option>
                                        <option value="Dominicaine">Dominicaine</option>
                                        <option value="Dominiquaise">Dominiquaise</option>
                                        <option value="√âquatorienne">√âquatorienne</option>
                                        <option value="Grenadienne">Grenadienne</option>
                                        <option value="Guat√©malt√®que">Guat√©malt√®que</option>
                                        <option value="Guyanienne">Guyanienne</option>
                                        <option value="Ha√Øtienne">Ha√Øtienne</option>
                                        <option value="Hondurienne">Hondurienne</option>
                                        <option value="Jama√Øcaine">Jama√Øcaine</option>
                                        <option value="Mexicaine">Mexicaine</option>
                                        <option value="Nicaraguayenne">Nicaraguayenne</option>
                                        <option value="Panam√©enne">Panam√©enne</option>
                                        <option value="Paraguayenne">Paraguayenne</option>
                                        <option value="P√©ruvienne">P√©ruvienne</option>
                                        <option value="Saint-lucienne">Saint-lucienne</option>
                                        <option value="Saint-vincentaise">Saint-vincentaise</option>
                                        <option value="Salvadorienne">Salvadorienne</option>
                                        <option value="Surinamaise">Surinamaise</option>
                                        <option value="Trinidadienne">Trinidadienne</option>
                                        <option value="Uruguayenne">Uruguayenne</option>
                                        <option value="V√©n√©zu√©lienne">V√©n√©zu√©lienne</option>
                                    </optgroup>
                                    <optgroup label="Oc√©anie">
                                        <option value="Australienne">Australienne</option>
                                        <option value="Fidjienne">Fidjienne</option>
                                        <option value="Marshallaise">Marshallaise</option>
                                        <option value="Micron√©sienne">Micron√©sienne</option>
                                        <option value="Nauruane">Nauruane</option>
                                        <option value="N√©o-z√©landaise">N√©o-z√©landaise</option>
                                        <option value="Paluane">Paluane</option>
                                        <option value="Papouane-n√©o-guin√©enne">Papouane-n√©o-guin√©enne</option>
                                        <option value="Salomonaise">Salomonaise</option>
                                        <option value="Samoane">Samoane</option>
                                        <option value="Tongienne">Tongienne</option>
                                        <option value="Tuvaluane">Tuvaluane</option>
                                        <option value="Vanuatuane">Vanuatuane</option>
                                    </optgroup>
                                    <option value="Autre">Autre</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="etat_civil">√âtat civil *</label>
                                <select id="etat_civil" name="etat_civil" required>
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="C√©libataire">C√©libataire</option>
                                    <option value="Mari√©">Mari√©(e)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="travaille_actuellement">Travaillez-vous actuellement ? *</label>
                                <select id="travaille_actuellement" name="travaille_actuellement" required onchange="toggleWorkFields()">
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="Oui">Oui</option>
                                    <option value="Non">Non</option>
                                </select>
                            </div>

                            <div id="work-fields" style="display: none;">
                                <div class="form-group">
                                    <label for="dernier_lieu_travail">Dernier lieu de travail</label>
                                    <input type="text" id="dernier_lieu_travail" name="dernier_lieu_travail" placeholder="Nom de l'entreprise">
                                </div>

                                <div class="form-group">
                                    <label for="raison_depart">Raison du d√©part</label>
                                    <textarea id="raison_depart" name="raison_depart" rows="3" placeholder="Expliquez bri√®vement la raison de votre d√©part..."></textarea>
                                </div>
                            </div>

                            <!-- Navigation Buttons Section 1 -->
                            <div class="form-navigation">
                                <button type="button" class="btn-next" onclick="nextSection(1)">
                                    Suivant
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Section 2: Formation et comp√©tences -->
                        <div class="form-section" data-section="2">
                            <h4 class="section-title">üéì Formation et comp√©tences</h4>

                            <div class="form-group">
                                <label for="niveau_instruction">Niveau d'instruction *</label>
                                <select id="niveau_instruction" name="niveau_instruction" required onchange="toggleSpecialisation()">
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="√âducation de base ou moins">√âducation de base ou moins</option>
                                    <option value="Dipl√¥me interm√©diaire">Dipl√¥me interm√©diaire</option>
                                    <option value="Dipl√¥me du secondaire">Dipl√¥me du secondaire</option>
                                    <option value="Dipl√¥me d'institut">Dipl√¥me d'institut</option>
                                </select>
                            </div>

                            <div id="specialisation-field" style="display: none;">
                                <div class="form-group">
                                    <label for="specialisation">Sp√©cialisation universitaire *</label>
                                    <select id="specialisation" name="specialisation" onchange="toggleAutreSpecialisation()">
                                        <option value="">-- S√©lectionnez --</option>
                                        <optgroup label="Licence (Baccalaur√©at universitaire)">
                                            <option value="Licence - G√©nie informatique">G√©nie informatique</option>
                                            <option value="Licence - Sciences informatiques">Sciences informatiques</option>
                                            <option value="Licence - Administration des affaires">Administration des affaires</option>
                                            <option value="Licence - G√©nie √©lectrique et √©lectronique">G√©nie √©lectrique et √©lectronique</option>
                                            <option value="Licence - Gestion des soins de sant√©">Gestion des soins de sant√©</option>
                                            <option value="Licence - Syst√®mes d'information de gestion">Syst√®mes d'information de gestion</option>
                                            <option value="Licence - Math√©matiques">Math√©matiques</option>
                                            <option value="Licence - G√©nie biom√©dical">G√©nie biom√©dical</option>
                                            <option value="Licence - Technologie de l'information">Technologie de l'information</option>
                                            <option value="Licence - G√©nie m√©canique">G√©nie m√©canique</option>
                                            <option value="Licence - G√©nie industriel">G√©nie industriel</option>
                                            <option value="Licence - G√©nie civil">G√©nie civil</option>
                                            <option value="Licence - Chimie">Chimie</option>
                                            <option value="Licence - Administration publique">Administration publique</option>
                                            <option value="Licence - Conception de jeux num√©riques">Conception de jeux num√©riques</option>
                                            <option value="Licence - Logistique">Logistique</option>
                                            <option value="Licence - Infirmier / Soins infirmiers">Infirmier / Soins infirmiers</option>
                                            <option value="Licence - Comptabilit√©">Comptabilit√©</option>
                                            <option value="Licence - Physique">Physique</option>
                                            <option value="Licence - Relations publiques">Relations publiques</option>
                                            <option value="Licence - Ressources humaines">Ressources humaines</option>
                                            <option value="Licence - Finance">Finance</option>
                                            <option value="Licence - √âconomie">√âconomie</option>
                                            <option value="Licence - Sociologie">Sociologie</option>
                                            <option value="Licence - Communications">Communications</option>
                                        </optgroup>
                                        <optgroup label="Master">
                                            <option value="Master - G√©nie informatique">G√©nie informatique</option>
                                            <option value="Master - Sciences informatiques">Sciences informatiques</option>
                                            <option value="Master - Administration des affaires">Administration des affaires</option>
                                            <option value="Master - G√©nie √©lectrique et √©lectronique">G√©nie √©lectrique et √©lectronique</option>
                                            <option value="Master - Gestion des soins de sant√©">Gestion des soins de sant√©</option>
                                            <option value="Master - Syst√®mes d'information de gestion">Syst√®mes d'information de gestion</option>
                                            <option value="Master - Math√©matiques">Math√©matiques</option>
                                            <option value="Master - G√©nie biom√©dical">G√©nie biom√©dical</option>
                                            <option value="Master - Technologie de l'information">Technologie de l'information</option>
                                            <option value="Master - G√©nie m√©canique">G√©nie m√©canique</option>
                                            <option value="Master - G√©nie industriel">G√©nie industriel</option>
                                            <option value="Master - G√©nie civil">G√©nie civil</option>
                                            <option value="Master - Chimie">Chimie</option>
                                            <option value="Master - Administration publique">Administration publique</option>
                                            <option value="Master - Logistique">Logistique</option>
                                            <option value="Master - Infirmier / Soins infirmiers">Infirmier / Soins infirmiers</option>
                                            <option value="Master - Comptabilit√©">Comptabilit√©</option>
                                            <option value="Master - Physique">Physique</option>
                                            <option value="Master - Relations publiques">Relations publiques</option>
                                            <option value="Master - Ressources humaines">Ressources humaines</option>
                                            <option value="Master - Finance">Finance</option>
                                            <option value="Master - √âconomie">√âconomie</option>
                                            <option value="Master - Sociologie">Sociologie</option>
                                            <option value="Master - Communications">Communications</option>
                                        </optgroup>
                                        <optgroup label="Doctorat">
                                            <option value="Doctorat - G√©nie informatique">G√©nie informatique</option>
                                            <option value="Doctorat - Sciences informatiques">Sciences informatiques</option>
                                            <option value="Doctorat - Administration des affaires">Administration des affaires</option>
                                            <option value="Doctorat - G√©nie √©lectrique et √©lectronique">G√©nie √©lectrique et √©lectronique</option>
                                            <option value="Doctorat - Math√©matiques">Math√©matiques</option>
                                            <option value="Doctorat - G√©nie biom√©dical">G√©nie biom√©dical</option>
                                            <option value="Doctorat - G√©nie m√©canique">G√©nie m√©canique</option>
                                            <option value="Doctorat - G√©nie civil">G√©nie civil</option>
                                            <option value="Doctorat - Chimie">Chimie</option>
                                            <option value="Doctorat - Physique">Physique</option>
                                            <option value="Doctorat - √âconomie">√âconomie</option>
                                            <option value="Doctorat - Sociologie">Sociologie</option>
                                        </optgroup>
                                        <option value="Autre">Autre</option>
                                    </select>
                                </div>

                                <div id="autre-specialisation-field" style="display: none;">
                                    <div class="form-group">
                                        <label for="specialisation_autre">Sp√©cifiez votre sp√©cialisation</label>
                                        <input type="text" id="specialisation_autre" name="specialisation_autre" placeholder="Entrez votre sp√©cialisation">
                                    </div>
                                </div>
                            </div>

                            <!-- Navigation Buttons Section 2 -->
                            <div class="form-navigation">
                                <button type="button" class="btn-prev" onclick="prevSection(2)">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                    Pr√©c√©dent
                                </button>
                                <button type="button" class="btn-next" onclick="nextSection(2)">
                                    Suivant
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Section 3: Comp√©tences linguistiques -->
                        <div class="form-section" data-section="3">
                            <h4 class="section-title">üåç Comp√©tences linguistiques</h4>

                            <div class="form-group">
                                <label for="langue_arabe">Langue arabe *</label>
                                <select id="langue_arabe" name="langue_arabe" required>
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="Faible">Faible</option>
                                    <option value="Bon">Bon</option>
                                    <option value="Tr√®s bon">Tr√®s bon</option>
                                    <option value="Excellent">Excellent</option>
                                    <option value="Non ma√Ætris√©e">Non ma√Ætris√©e</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="langue_anglaise">Langue anglaise *</label>
                                <select id="langue_anglaise" name="langue_anglaise" required>
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="A1 / A2 : D√©butant">A1 / A2 : D√©butant</option>
                                    <option value="B1 / B2 : Interm√©diaire">B1 / B2 : Interm√©diaire</option>
                                    <option value="C1 / C2 : Avanc√©">C1 / C2 : Avanc√©</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="langue_francaise">Langue fran√ßaise *</label>
                                <select id="langue_francaise" name="langue_francaise" required>
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="A1 / A2 : D√©butant">A1 / A2 : D√©butant</option>
                                    <option value="B1 / B2 : Interm√©diaire">B1 / B2 : Interm√©diaire</option>
                                    <option value="C1 / C2 : Avanc√©">C1 / C2 : Avanc√©</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="autre_langue_toggle">
                                    <input type="checkbox" id="autre_langue_toggle" onchange="toggleAutreLangue()">
                                    Ajouter une autre langue
                                </label>
                            </div>

                            <div id="autre-langue-fields" style="display: none;">
                                <div class="form-group">
                                    <label for="autre_langue_nom">Nom de la langue</label>
                                    <input type="text" id="autre_langue_nom" name="autre_langue_nom" placeholder="Ex: Espagnol, Allemand...">
                                </div>

                                <div class="form-group">
                                    <label for="autre_langue_niveau">Niveau</label>
                                    <select id="autre_langue_niveau" name="autre_langue_niveau">
                                        <option value="">-- S√©lectionnez --</option>
                                        <option value="A1 / A2 : D√©butant">A1 / A2 : D√©butant</option>
                                        <option value="B1 / B2 : Interm√©diaire">B1 / B2 : Interm√©diaire</option>
                                        <option value="C1 / C2 : Avanc√©">C1 / C2 : Avanc√©</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Navigation Buttons Section 3 -->
                            <div class="form-navigation">
                                <button type="button" class="btn-prev" onclick="prevSection(3)">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                    Pr√©c√©dent
                                </button>
                                <button type="button" class="btn-next" onclick="nextSection(3)">
                                    Suivant
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Section 4: Informations suppl√©mentaires -->
                        <div class="form-section" data-section="4">
                            <h4 class="section-title">üè• Informations suppl√©mentaires</h4>

                            <div class="form-group">
                                <label for="problemes_sante">Souffrez-vous de probl√®mes de sant√© ? *</label>
                                <select id="problemes_sante" name="problemes_sante" required onchange="toggleNatureMaladie()">
                                    <option value="">-- S√©lectionnez --</option>
                                    <option value="Oui">Oui</option>
                                    <option value="Non">Non</option>
                                </select>
                            </div>

                            <div id="nature-maladie-field" style="display: none;">
                                <div class="form-group">
                                    <label for="nature_maladie">Nature de la maladie</label>
                                    <textarea id="nature_maladie" name="nature_maladie" rows="3" placeholder="Indiquez la nature de votre probl√®me de sant√©..."></textarea>
                                </div>
                            </div>

                            <!-- Navigation Buttons Section 4 -->
                            <div class="form-navigation">
                                <button type="button" class="btn-prev" onclick="prevSection(4)">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                    Pr√©c√©dent
                                </button>
                                <button type="button" class="btn-next" onclick="nextSection(4)">
                                    Suivant
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Section 5: Choix de travail (Candidature Spontan√©e uniquement) -->
                        {% if job.id == 0 %}
                        <div class="form-section" data-section="5">
                            <h4 class="section-title">üíº Choix de travail</h4>
                            <p style="margin-bottom: 1rem; color: #666;">
                                Cliquez sur un d√©partement pour voir les postes disponibles et s√©lectionnez ceux qui vous int√©ressent 
                                <span style="color: #e74c3c; font-weight: bold;">(Maximum 5 choix)</span>
                            </p>
                            
                            <!-- Compteur de s√©lections -->
                            <div id="selection-counter" style="background: #ecf0f1; padding: 0.8rem; border-radius: 8px; margin-bottom: 1.5rem; text-align: center;">
                                <span style="font-size: 1.1rem; font-weight: bold; color: #2c3e50;">
                                    S√©lectionn√©s : <span id="count-selected" style="color: #3498db;">0</span> / 5
                                </span>
                            </div>

                            <!-- D√©partement 1: Production -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept1')">
                                    <span class="department-name">1Ô∏è‚É£ D√©partement de la production</span>
                                    <span class="department-badge">8 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept1" class="department-content">
                                    <div class="positions-grid">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_1" name="choix_travail" value="Chef du d√©partement de production" onchange="updateSelectionCount()">
                                        <label for="prod_1">Chef du d√©partement de production</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_2" name="choix_travail" value="Directeur de la production" onchange="updateSelectionCount()">
                                        <label for="prod_2">Directeur de la production</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_3" name="choix_travail" value="Superviseur de production" onchange="updateSelectionCount()">
                                        <label for="prod_3">Superviseur de production</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_4" name="choix_travail" value="Assistant de production" onchange="updateSelectionCount()">
                                        <label for="prod_4">Assistant de production</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_5" name="choix_travail" value="Ouvrier de production" onchange="updateSelectionCount()">
                                        <label for="prod_5">Ouvrier de production</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_6" name="choix_travail" value="Ouvrier d'emballage et de conditionnement" onchange="updateSelectionCount()">
                                        <label for="prod_6">Ouvrier d'emballage et de conditionnement</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_7" name="choix_travail" value="Op√©rateur de machine de remplissage d'eau" onchange="updateSelectionCount()">
                                        <label for="prod_7">Op√©rateur de machine de remplissage d'eau</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="prod_8" name="choix_travail" value="Technicien d'exploitation des lignes de production" onchange="updateSelectionCount()">
                                        <label for="prod_8">Technicien d'exploitation des lignes de production</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 2: Entrep√¥ts et achats -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept2')">
                                    <span class="department-name">2Ô∏è‚É£ D√©partement des entrep√¥ts et des achats</span>
                                    <span class="department-badge">7 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept2" class="department-content">
                                    <div class="positions-grid">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_1" name="choix_travail" value="Magasinier des produits finis / Contr√¥leur de stock" onchange="updateSelectionCount()">
                                        <label for="entrep_1">Magasinier des produits finis / Contr√¥leur de stock</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_2" name="choix_travail" value="Magasinier des immobilisations" onchange="updateSelectionCount()">
                                        <label for="entrep_2">Magasinier des immobilisations</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_3" name="choix_travail" value="Magasinier des mati√®res premi√®res" onchange="updateSelectionCount()">
                                        <label for="entrep_3">Magasinier des mati√®res premi√®res</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_4" name="choix_travail" value="Magasinier des pi√®ces de rechange" onchange="updateSelectionCount()">
                                        <label for="entrep_4">Magasinier des pi√®ces de rechange</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_5" name="choix_travail" value="Responsable des entrep√¥ts" onchange="updateSelectionCount()">
                                        <label for="entrep_5">Responsable des entrep√¥ts</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_6" name="choix_travail" value="Manutentionnaire (chargement et d√©chargement)" onchange="updateSelectionCount()">
                                        <label for="entrep_6">Manutentionnaire (chargement et d√©chargement)</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="entrep_7" name="choix_travail" value="Chauffeur de camion de distribution" onchange="updateSelectionCount()">
                                        <label for="entrep_7">Chauffeur de camion de distribution</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 3: Unit√© des achats -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept3')">
                                    <span class="department-name">3Ô∏è‚É£ Unit√© des achats (Service des approvisionnements)</span>
                                    <span class="department-badge">5 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept3" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="achat_1" name="choix_travail" value="Superviseur des achats" onchange="updateSelectionCount()">
                                            <label for="achat_1">Superviseur des achats</label>
                                        </div>
                                        <div class="checkbox-group">
                                        <input type="checkbox" id="achat_2" name="choix_travail" value="Responsable des achats locaux" onchange="updateSelectionCount()">
                                        <label for="achat_2">Responsable des achats locaux</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="achat_3" name="choix_travail" value="Responsable des achats locaux et administratifs" onchange="updateSelectionCount()">
                                        <label for="achat_3">Responsable des achats locaux et administratifs</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="achat_4" name="choix_travail" value="Agent de suivi des livraisons" onchange="updateSelectionCount()">
                                        <label for="achat_4">Agent de suivi des livraisons</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="achat_5" name="choix_travail" value="Contr√¥leur ou analyste des achats" onchange="updateSelectionCount()">
                                        <label for="achat_5">Contr√¥leur ou analyste des achats</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 4: Administratif et comptable -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept4')">
                                    <span class="department-name">4Ô∏è‚É£ D√©partement administratif et comptable</span>
                                    <span class="department-badge">6 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept4" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                        <input type="checkbox" id="admin_1" name="choix_travail" value="Comptable" onchange="updateSelectionCount()">
                                        <label for="admin_1">Comptable</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="admin_2" name="choix_travail" value="Assistant administratif" onchange="updateSelectionCount()">
                                        <label for="admin_2">Assistant administratif</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="admin_3" name="choix_travail" value="Caissier" onchange="updateSelectionCount()">
                                        <label for="admin_3">Caissier</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="admin_4" name="choix_travail" value="R√©ceptionniste" onchange="updateSelectionCount()">
                                        <label for="admin_4">R√©ceptionniste</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="admin_5" name="choix_travail" value="Secr√©taire ex√©cutif(ve)" onchange="updateSelectionCount()">
                                        <label for="admin_5">Secr√©taire ex√©cutif(ve)</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="admin_6" name="choix_travail" value="Responsable des ressources humaines (RH)" onchange="updateSelectionCount()">
                                        <label for="admin_6">Responsable des ressources humaines (RH)</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 5: Sant√©, s√©curit√© et qualit√© -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept5')">
                                    <span class="department-name">5Ô∏è‚É£ D√©partement sant√©, s√©curit√© et qualit√©</span>
                                    <span class="department-badge">10 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept5" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                        <input type="checkbox" id="sante_1" name="choix_travail" value="Directeur sant√© et s√©curit√© au travail" onchange="updateSelectionCount()">
                                        <label for="sante_1">Directeur sant√© et s√©curit√© au travail</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_2" name="choix_travail" value="Responsable sant√© et s√©curit√© au travail" onchange="updateSelectionCount()">
                                        <label for="sante_2">Responsable sant√© et s√©curit√© au travail</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_3" name="choix_travail" value="Superviseur de la propret√©" onchange="updateSelectionCount()">
                                        <label for="sante_3">Superviseur de la propret√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_4" name="choix_travail" value="Superviseur de la sant√©" onchange="updateSelectionCount()">
                                        <label for="sante_4">Superviseur de la sant√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_5" name="choix_travail" value="Superviseur de la s√©curit√© au travail" onchange="updateSelectionCount()">
                                        <label for="sante_5">Superviseur de la s√©curit√© au travail</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_6" name="choix_travail" value="Technicien en st√©rilisation et traitement de l'eau" onchange="updateSelectionCount()">
                                        <label for="sante_6">Technicien en st√©rilisation et traitement de l'eau</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_7" name="choix_travail" value="Technicien de s√©curit√©" onchange="updateSelectionCount()">
                                        <label for="sante_7">Technicien de s√©curit√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_8" name="choix_travail" value="Responsable des urgences et interventions" onchange="updateSelectionCount()">
                                        <label for="sante_8">Responsable des urgences et interventions</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_9" name="choix_travail" value="Formateur en s√©curit√©" onchange="updateSelectionCount()">
                                        <label for="sante_9">Formateur en s√©curit√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="sante_10" name="choix_travail" value="Secouriste industriel / Technicien de premiers secours" onchange="updateSelectionCount()">
                                        <label for="sante_10">Secouriste industriel / Technicien de premiers secours</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 6: Marketing et ventes -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept6')">
                                    <span class="department-name">6Ô∏è‚É£ D√©partement marketing et ventes</span>
                                    <span class="department-badge">6 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept6" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                        <input type="checkbox" id="market_1" name="choix_travail" value="Chef du d√©partement marketing et ventes" onchange="updateSelectionCount()">
                                        <label for="market_1">Chef du d√©partement marketing et ventes</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="market_2" name="choix_travail" value="Adjoint du d√©partement marketing et ventes" onchange="updateSelectionCount()">
                                        <label for="market_2">Adjoint du d√©partement marketing et ventes</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="market_3" name="choix_travail" value="Superviseur des ventes" onchange="updateSelectionCount()">
                                        <label for="market_3">Superviseur des ventes</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="market_4" name="choix_travail" value="Repr√©sentant commercial de terrain" onchange="updateSelectionCount()">
                                        <label for="market_4">Repr√©sentant commercial de terrain</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="market_5" name="choix_travail" value="Responsable marketing digital" onchange="updateSelectionCount()">
                                        <label for="market_5">Responsable marketing digital</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="market_6" name="choix_travail" value="Responsable relations clients" onchange="updateSelectionCount()">
                                        <label for="market_6">Responsable relations clients</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 7: Maintenance -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept7')">
                                    <span class="department-name">7Ô∏è‚É£ D√©partement maintenance</span>
                                    <span class="department-badge">11 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept7" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                        <input type="checkbox" id="maint_1" name="choix_travail" value="Chef du d√©partement maintenance" onchange="updateSelectionCount()">
                                        <label for="maint_1">Chef du d√©partement maintenance</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_2" name="choix_travail" value="Ing√©nieur de maintenance" onchange="updateSelectionCount()">
                                        <label for="maint_2">Ing√©nieur de maintenance</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_3" name="choix_travail" value="Technicien de maintenance √©lectrique" onchange="updateSelectionCount()">
                                        <label for="maint_3">Technicien de maintenance √©lectrique</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_4" name="choix_travail" value="Technicien en maintenance √©lectronique / automatisme" onchange="updateSelectionCount()">
                                        <label for="maint_4">Technicien en maintenance √©lectronique / automatisme</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_5" name="choix_travail" value="Technicien en r√©frig√©ration et climatisation" onchange="updateSelectionCount()">
                                        <label for="maint_5">Technicien en r√©frig√©ration et climatisation</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_6" name="choix_travail" value="Soudeur / M√©tallier industriel" onchange="updateSelectionCount()">
                                        <label for="maint_6">Soudeur / M√©tallier industriel</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_7" name="choix_travail" value="Planificateur de maintenance" onchange="updateSelectionCount()">
                                        <label for="maint_7">Planificateur de maintenance</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_8" name="choix_travail" value="Technicien de maintenance m√©canique" onchange="updateSelectionCount()">
                                        <label for="maint_8">Technicien de maintenance m√©canique</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_9" name="choix_travail" value="√âlectricien industriel" onchange="updateSelectionCount()">
                                        <label for="maint_9">√âlectricien industriel</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_10" name="choix_travail" value="Assistant technicien de maintenance" onchange="updateSelectionCount()">
                                        <label for="maint_10">Assistant technicien de maintenance</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="maint_11" name="choix_travail" value="Technicien des pompes et syst√®mes d'eau" onchange="updateSelectionCount()">
                                        <label for="maint_11">Technicien des pompes et syst√®mes d'eau</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 8: Qualit√© et contr√¥le -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept8')">
                                    <span class="department-name">8Ô∏è‚É£ D√©partement qualit√© et contr√¥le</span>
                                    <span class="department-badge">7 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept8" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                        <input type="checkbox" id="qual_1" name="choix_travail" value="Chef du d√©partement qualit√© / Contr√¥le qualit√©" onchange="updateSelectionCount()">
                                        <label for="qual_1">Chef du d√©partement qualit√© / Contr√¥le qualit√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="qual_2" name="choix_travail" value="Ing√©nieur qualit√©" onchange="updateSelectionCount()">
                                        <label for="qual_2">Ing√©nieur qualit√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="qual_3" name="choix_travail" value="Sp√©cialiste assurance qualit√©" onchange="updateSelectionCount()">
                                        <label for="qual_3">Sp√©cialiste assurance qualit√©</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="qual_4" name="choix_travail" value="Contr√¥leur de qualit√© (QA/QC)" onchange="updateSelectionCount()">
                                        <label for="qual_4">Contr√¥leur de qualit√© (QA/QC)</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="qual_5" name="choix_travail" value="Sp√©cialiste en s√©curit√© alimentaire" onchange="updateSelectionCount()">
                                        <label for="qual_5">Sp√©cialiste en s√©curit√© alimentaire</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="qual_6" name="choix_travail" value="Technicien de laboratoire (analyse de l'eau)" onchange="updateSelectionCount()">
                                        <label for="qual_6">Technicien de laboratoire (analyse de l'eau)</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="qual_7" name="choix_travail" value="Inspecteur qualit√©" onchange="updateSelectionCount()">
                                        <label for="qual_7">Inspecteur qualit√©</label>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- D√©partement 9: Technologies de l'information (IT) -->
                            <div class="department-accordion">
                                <button type="button" class="department-header" onclick="toggleDepartment('dept9')">
                                    <span class="department-name">9Ô∏è‚É£ D√©partement IT (Technologies de l'information)</span>
                                    <span class="department-badge">5 postes</span>
                                    <span class="accordion-icon">‚ñº</span>
                                </button>
                                <div id="dept9" class="department-content">
                                    <div class="positions-grid">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="it_1" name="choix_travail" value="Responsable IT / Directeur des syst√®mes d'information" onchange="updateSelectionCount()">
                                            <label for="it_1">Responsable IT / Directeur des syst√®mes d'information</label>
                                        </div>
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="it_2" name="choix_travail" value="D√©veloppeur / Ing√©nieur logiciel" onchange="updateSelectionCount()">
                                            <label for="it_2">D√©veloppeur / Ing√©nieur logiciel</label>
                                        </div>
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="it_3" name="choix_travail" value="Administrateur r√©seau et syst√®mes" onchange="updateSelectionCount()">
                                            <label for="it_3">Administrateur r√©seau et syst√®mes</label>
                                        </div>
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="it_4" name="choix_travail" value="Technicien support informatique" onchange="updateSelectionCount()">
                                            <label for="it_4">Technicien support informatique</label>
                                        </div>
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="it_5" name="choix_travail" value="Sp√©cialiste cybers√©curit√©" onchange="updateSelectionCount()">
                                            <label for="it_5">Sp√©cialiste cybers√©curit√©</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Navigation Buttons Section 5 -->
                            <div class="form-navigation">
                                <button type="button" class="btn-prev" onclick="prevSection(5)">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                    Pr√©c√©dent
                                </button>
                                <button type="button" class="btn-next" onclick="nextSection(5)">
                                    Suivant
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Section {% if job.id == 0 %}6{% else %}5{% endif %}: Documents √† fournir -->
                        <div class="form-section" data-section="{% if job.id == 0 %}6{% else %}5{% endif %}">
                            <h4 class="section-title">üìÅ Documents √† fournir</h4>

                            <div class="form-group">
                                <label for="photo">Photo d'identit√© *</label>
                                <div class="photo-upload">
                                    <input type="file" id="photo" name="photo" accept="image/jpeg,image/png,image/jpg" required onchange="previewPhoto(event)">
                                    <div class="photo-preview" id="photoPreview">
                                        <div class="photo-placeholder">
                                            <span class="photo-icon">üì∑</span>
                                            <p>Cliquez pour ajouter une photo</p>
                                        </div>
                                    </div>
                                </div>
                                <small>Formats accept√©s : JPG, JPEG, PNG | Taille max : 5 MB</small>
                            </div>

                            <div class="form-group">
                                <label for="cv">CV *</label>
                                <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx" required>
                                <small>Formats : PDF, DOC, DOCX | Taille max : 5 MB</small>
                            </div>

                            <div class="form-group">
                                <label for="lettre_demande">Lettre de Demande</label>
                                <div class="cover-letter-options">
                                    <div class="option-tabs">
                                        <button type="button" class="tab-btn active" onclick="showTab('write')">‚úçÔ∏è √âcrire</button>
                                        <button type="button" class="tab-btn" onclick="showTab('upload')">üìé Uploader un fichier</button>
                                    </div>
                                    
                                    <div id="write-tab" class="tab-content active">
                                        <textarea id="lettre_demande_text" name="lettre_demande_text" rows="8" placeholder="R√©digez votre lettre de demande..."></textarea>
                                    </div>
                                    
                                    <div id="upload-tab" class="tab-content">
                                        <input type="file" id="lettre_demande" name="lettre_demande" accept=".pdf,.doc,.docx">
                                        <small>Formats accept√©s : PDF, DOC, DOCX | Taille max : 5 MB</small>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="carte_id">Carte Nationale ou Passport *</label>
                                <input type="file" id="carte_id" name="carte_id" accept=".pdf,.jpg,.jpeg,.png" required>
                                <small>Formats : PDF, JPG, PNG | Taille max : 5 MB</small>
                            </div>

                            <div class="form-group">
                                <label for="lettre_recommandation">Lettre de Recommandation *</label>
                                <input type="file" id="lettre_recommandation" name="lettre_recommandation" accept=".pdf,.doc,.docx" required>
                                <small>Formats : PDF, DOC, DOCX | Taille max : 5 MB</small>
                            </div>

                            <div class="form-group">
                                <label for="casier_judiciaire">Casier Judiciaire *</label>
                                <input type="file" id="casier_judiciaire" name="casier_judiciaire" accept=".pdf,.jpg,.jpeg,.png" required>
                                <small>Formats : PDF, JPG, PNG | Taille max : 5 MB</small>
                            </div>

                            <h4 class="section-title">Documents optionnels</h4>

                            <div class="form-group">
                                <label for="diplome">Dipl√¥me (si possible)</label>
                                <input type="file" id="diplome" name="diplome" accept=".pdf,.jpg,.jpeg,.png">
                                <small>Formats : PDF, JPG, PNG | Taille max : 5 MB</small>
                            </div>

                            <div class="form-group">
                                <label for="certificat_travail">Certificat de Travail (si possible)</label>
                                <input type="file" id="certificat_travail" name="certificat_travail" accept=".pdf,.doc,.docx">
                                <small>Formats : PDF, DOC, DOCX | Taille max : 5 MB</small>
                            </div>

                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="terms" name="terms" required>
                                <label for="terms">J'accepte que mes donn√©es soient trait√©es dans le cadre de ma candidature *</label>
                            </div>

                            <!-- Navigation Buttons Section {% if job.id == 0 %}6{% else %}5{% endif %} -->
                            <div class="form-navigation">
                                <button type="button" class="btn-prev" onclick="prevSection({% if job.id == 0 %}6{% else %}5{% endif %})">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                    Pr√©c√©dent
                                </button>
                                <button type="submit" class="btn-submit">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 2L11 13"></path>
                                        <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
                                    </svg>
                                    Envoyer ma candidature
                                </button>
                            </div>
                        </div>
                    </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Application de Travail. Tous droits r√©serv√©s.</p>
        </div>
    </footer>

    <script>
        let currentSection = 1;
        const totalSections = {% if job.id == 0 %}6{% else %}5{% endif %};

        function showSection(sectionNumber) {
            // Masquer toutes les sections
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section active
            const activeSection = document.querySelector(`.form-section[data-section="${sectionNumber}"]`);
            if (activeSection) {
                activeSection.classList.add('active');
            }
            
            // Mettre √† jour les steps
            document.querySelectorAll('.step').forEach(step => {
                const stepNumber = parseInt(step.getAttribute('data-step'));
                step.classList.remove('active', 'completed');
                
                if (stepNumber === sectionNumber) {
                    step.classList.add('active');
                } else if (stepNumber < sectionNumber) {
                    step.classList.add('completed');
                }
            });
            
            // Scroll en haut de la page
            window.scrollTo({
                top: document.querySelector('.application-form').offsetTop - 100,
                behavior: 'smooth'
            });
        }

        function validateSection(sectionNumber) {
            const section = document.querySelector(`.form-section[data-section="${sectionNumber}"]`);
            if (!section) return true;
            
            // Validation sp√©ciale pour Section 5 (Choix de travail) - au moins 1 poste, maximum 5
            if (sectionNumber === 5) {
                const selectedCheckboxes = document.querySelectorAll('input[name="choix_travail"]:checked');
                
                if (selectedCheckboxes.length === 0) {
                    alert('Veuillez s√©lectionner au moins un poste (maximum 5).');
                    return false;
                }
                
                if (selectedCheckboxes.length > 5) {
                    alert('Vous ne pouvez s√©lectionner que 5 postes maximum.');
                    return false;
                }
                
                return true;
            }
            
            // R√©cup√©rer tous les champs requis visibles de la section
            const requiredFields = section.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                // V√©rifier seulement les champs visibles
                if (field.offsetParent !== null) {
                    if (!field.value || (field.type === 'checkbox' && !field.checked)) {
                        isValid = false;
                        field.classList.add('error');
                        
                        // Afficher le message d'erreur natif
                        if (!field.validity.valid) {
                            field.reportValidity();
                        }
                    } else {
                        field.classList.remove('error');
                    }
                }
            });
            
            return isValid;
        }

        function nextSection(current) {
            if (validateSection(current)) {
                if (current < totalSections) {
                    currentSection = current + 1;
                    showSection(currentSection);
                }
            }
        }

        function prevSection(current) {
            if (current > 1) {
                currentSection = current - 1;
                showSection(currentSection);
            }
        }

        // Initialiser la premi√®re section au chargement
        document.addEventListener('DOMContentLoaded', function() {
            showSection(1);
        });

        function toggleWorkFields() {
            var select = document.getElementById('travaille_actuellement');
            var workFields = document.getElementById('work-fields');
            
            if (select.value === 'Oui') {
                workFields.style.display = 'block';
                // Rendre les champs requis si "Oui" est s√©lectionn√©
                document.getElementById('dernier_lieu_travail').required = true;
                document.getElementById('raison_depart').required = true;
            } else {
                workFields.style.display = 'none';
                // Retirer l'exigence si "Non" est s√©lectionn√©
                document.getElementById('dernier_lieu_travail').required = false;
                document.getElementById('raison_depart').required = false;
                // Vider les champs
                document.getElementById('dernier_lieu_travail').value = '';
                document.getElementById('raison_depart').value = '';
            }
        }

        // Fonction pour compter et limiter les s√©lections de postes
        function updateSelectionCount() {
            const checkboxes = document.querySelectorAll('input[name="choix_travail"]');
            const checkedCount = document.querySelectorAll('input[name="choix_travail"]:checked').length;
            const countDisplay = document.getElementById('count-selected');
            const counter = document.getElementById('selection-counter');
            
            // Mettre √† jour le compteur
            if (countDisplay) {
                countDisplay.textContent = checkedCount;
                
                // Changer la couleur selon le nombre de s√©lections
                if (checkedCount === 0) {
                    counter.style.background = '#ecf0f1';
                    countDisplay.style.color = '#3498db';
                } else if (checkedCount < 5) {
                    counter.style.background = '#d5f4e6';
                    countDisplay.style.color = '#27ae60';
                } else if (checkedCount === 5) {
                    counter.style.background = '#ffe6e6';
                    countDisplay.style.color = '#e74c3c';
                }
            }
            
            // D√©sactiver les autres checkboxes si 5 sont d√©j√† s√©lectionn√©s
            if (checkedCount >= 5) {
                checkboxes.forEach(checkbox => {
                    if (!checkbox.checked) {
                        checkbox.disabled = true;
                    }
                });
            } else {
                // R√©activer tous les checkboxes
                checkboxes.forEach(checkbox => {
                    checkbox.disabled = false;
                });
            }
        }

        // Fonction pour ouvrir/fermer les d√©partements (accord√©on)
        function toggleDepartment(deptId) {
            const content = document.getElementById(deptId);
            const header = content.previousElementSibling;
            const icon = header.querySelector('.accordion-icon');
            
            // Toggle l'affichage
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                icon.style.transform = 'rotate(0deg)';
                header.classList.remove('active');
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
                icon.style.transform = 'rotate(180deg)';
                header.classList.add('active');
            }
        }

        function toggleSpecialisation() {
            var select = document.getElementById('niveau_instruction');
            var specialisationField = document.getElementById('specialisation-field');
            var specialisationSelect = document.getElementById('specialisation');
            
            if (select.value === 'Dipl√¥me d\'institut') {
                specialisationField.style.display = 'block';
                specialisationSelect.required = true;
            } else {
                specialisationField.style.display = 'none';
                specialisationSelect.required = false;
                specialisationSelect.value = '';
                document.getElementById('autre-specialisation-field').style.display = 'none';
                document.getElementById('specialisation_autre').value = '';
            }
        }

        function toggleAutreSpecialisation() {
            var select = document.getElementById('specialisation');
            var autreField = document.getElementById('autre-specialisation-field');
            var autreInput = document.getElementById('specialisation_autre');
            
            if (select.value === 'Autre') {
                autreField.style.display = 'block';
                autreInput.required = true;
            } else {
                autreField.style.display = 'none';
                autreInput.required = false;
                autreInput.value = '';
            }
        }

        function toggleAutreLangue() {
            var checkbox = document.getElementById('autre_langue_toggle');
            var autreLangueFields = document.getElementById('autre-langue-fields');
            var langueNom = document.getElementById('autre_langue_nom');
            var langueNiveau = document.getElementById('autre_langue_niveau');
            
            if (checkbox.checked) {
                autreLangueFields.style.display = 'block';
                langueNom.required = true;
                langueNiveau.required = true;
            } else {
                autreLangueFields.style.display = 'none';
                langueNom.required = false;
                langueNiveau.required = false;
                langueNom.value = '';
                langueNiveau.value = '';
            }
        }

        function toggleNatureMaladie() {
            var select = document.getElementById('problemes_sante');
            var natureMaladieField = document.getElementById('nature-maladie-field');
            var natureMaladieInput = document.getElementById('nature_maladie');
            
            if (select.value === 'Oui') {
                natureMaladieField.style.display = 'block';
                natureMaladieInput.required = true;
            } else {
                natureMaladieField.style.display = 'none';
                natureMaladieInput.required = false;
                natureMaladieInput.value = '';
            }
        }

        // Fonction pour afficher/masquer le champ "Autre" dans Choix de travail
        function toggleAutreTravail() {
            const autreCheckbox = document.getElementById('travail_autre');
            const autreTravailField = document.getElementById('autre-travail-field');
            const autrePrecision = document.getElementById('autre_travail_precision');
            
            if (autreCheckbox && autreCheckbox.checked) {
                autreTravailField.style.display = 'block';
                autrePrecision.required = true;
            } else {
                autreTravailField.style.display = 'none';
                autrePrecision.required = false;
                autrePrecision.value = '';
            }
        }

        // Fonction pour mettre √† jour les r√©gions selon le pays s√©lectionn√©
        function updateRegions() {
            const paysSelect = document.getElementById('pays');
            const regionSelect = document.getElementById('region');
            const selectedPays = paysSelect.value;
            
            // D√©finir les r√©gions par √Æle
            const regions = {
                'Grande Comore': [
                    'Bambao',
                    'Hambou',
                    'Hamahamet',
                    'Itsandra',
                    'Mitsamiouli',
                    'Moroni',
                    'Oichili',
                    'Dimani',
                    'Mboikou',
                    'Mboud√©'
                ],
                'Anjouan': [
                    'Domoni',
                    'Mutsamudu',
                    'Ouani',
                    'Sima',
                    'Adda-Dou√©ni',
                    'Barakani',
                    'Noumak√©l√©',
                    'Moya',
                    'Nioumachoua',
                    'Pomoni',
                    'Tsembehou'
                ],
                'Moh√©li': [
                    'Fomboni',
                    'Djando',
                    'Hoani',
                    'Nioumachoua',
                    'Ouallah'
                ]
            };
            
            // Vider le select des r√©gions
            regionSelect.innerHTML = '<option value="">-- S√©lectionnez une r√©gion --</option>';
            
            // Si un pays est s√©lectionn√©
            if (selectedPays && regions[selectedPays]) {
                // Activer le select des r√©gions
                regionSelect.disabled = false;
                
                // Ajouter les r√©gions correspondantes
                regions[selectedPays].forEach(region => {
                    const option = document.createElement('option');
                    option.value = region;
                    option.textContent = region;
                    regionSelect.appendChild(option);
                });
            } else {
                // D√©sactiver le select si aucun pays n'est s√©lectionn√©
                regionSelect.disabled = true;
                regionSelect.innerHTML = '<option value="">-- S√©lectionnez d\'abord un pays --</option>';
            }
            
            // R√©initialiser la valeur s√©lectionn√©e
            regionSelect.value = '';
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-btn').forEach(function(btn) {
                btn.classList.remove('active');
            });
            
            if (tabName === 'write') {
                document.getElementById('write-tab').classList.add('active');
                document.querySelectorAll('.tab-btn')[0].classList.add('active');
                document.getElementById('lettre_demande').value = '';
            } else {
                document.getElementById('upload-tab').classList.add('active');
                document.querySelectorAll('.tab-btn')[1].classList.add('active');
                document.getElementById('lettre_demande_text').value = '';
            }
        }

        function previewPhoto(event) {
            var file = event.target.files[0];
            var preview = document.getElementById('photoPreview');
            
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('La photo est trop volumineuse. Taille maximale : 5 MB');
                    event.target.value = '';
                    return;
                }
                
                if (!file.type.match('image.*')) {
                    alert('Veuillez s√©lectionner une image valide (JPG, JPEG, PNG)');
                    event.target.value = '';
                    return;
                }
                
                var reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = '<img src="' + e.target.result + '" alt="Photo d\'identit√©"><button type="button" class="remove-photo" onclick="removePhoto()">‚úï</button>';
                }
                reader.readAsDataURL(file);
            }
        }

        function removePhoto() {
            var photoInput = document.getElementById('photo');
            var preview = document.getElementById('photoPreview');
            
            photoInput.value = '';
            preview.innerHTML = '<div class="photo-placeholder"><span class="photo-icon">üì∑</span><p>Cliquez pour ajouter une photo</p></div>';
        }

        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.menu-toggle');
            navLinks.classList.toggle('active');
            menuToggle.classList.toggle('active');
        }

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const navbar = document.querySelector('.navbar');
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.menu-toggle');
            
            if (!navbar.contains(event.target) && navLinks.classList.contains('active')) {
                navLinks.classList.remove('active');
                menuToggle.classList.remove('active');
            }
        });

        // Toggle dropdown on mobile
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const dropdown = this.closest('.dropdown');
                        const isActive = dropdown.classList.contains('active');
                        
                        // Fermer tous les autres dropdowns
                        document.querySelectorAll('.dropdown').forEach(d => {
                            d.classList.remove('active');
                        });
                        
                        // Toggle le dropdown actuel
                        if (!isActive) {
                            dropdown.classList.add('active');
                        }
                    }
                });
            });
        });

        // Fonction pour mettre √† jour les postes en fonction du d√©partement s√©lectionn√©
        function updatePositions() {
            const departement = document.getElementById('departement').value;
            const posteSelect = document.getElementById('poste');
            const posteGroup = document.getElementById('poste-group');
            const posteHint = document.getElementById('poste-hint');
            
            // D√©finition des postes par d√©partement
            const postes = {
                'production': [
                    'Chef du d√©partement de production',
                    'Directeur de la production',
                    'Superviseur de production',
                    'Assistant de production',
                    'Ouvrier de production',
                    'Ouvrier d\'emballage et de conditionnement',
                    'Op√©rateur de machine de remplissage d\'eau',
                    'Technicien d\'exploitation des lignes de production'
                ],
                'entrepots': [
                    'Magasinier des produits finis / Contr√¥leur de stock',
                    'Magasinier des immobilisations',
                    'Magasinier des mati√®res premi√®res',
                    'Magasinier des pi√®ces de rechange',
                    'Responsable des entrep√¥ts',
                    'Manutentionnaire (chargement et d√©chargement)',
                    'Chauffeur de camion de distribution'
                ],
                'achats': [
                    'Superviseur des achats',
                    'Responsable des achats locaux',
                    'Responsable des achats locaux et administratifs',
                    'Agent de suivi des livraisons',
                    'Contr√¥leur ou analyste des achats'
                ],
                'administratif': [
                    'Comptable',
                    'Assistant administratif',
                    'Caissier',
                    'R√©ceptionniste',
                    'Secr√©taire ex√©cutif(ve)',
                    'Responsable des ressources humaines (RH)'
                ],
                'sante_securite': [
                    'Directeur sant√© et s√©curit√© au travail',
                    'Responsable sant√© et s√©curit√© au travail',
                    'Superviseur de la propret√©',
                    'Superviseur de la sant√©',
                    'Superviseur de la s√©curit√© au travail',
                    'Technicien en st√©rilisation et traitement de l\'eau',
                    'Technicien de s√©curit√©',
                    'Responsable des urgences et interventions',
                    'Formateur en s√©curit√©',
                    'Secouriste industriel / Technicien de premiers secours'
                ],
                'marketing': [
                    'Chef du d√©partement marketing et ventes',
                    'Adjoint du d√©partement marketing et ventes',
                    'Superviseur des ventes',
                    'Repr√©sentant commercial de terrain',
                    'Responsable marketing digital',
                    'Responsable relations clients'
                ],
                'maintenance': [
                    'Chef du d√©partement maintenance',
                    'Ing√©nieur de maintenance',
                    'Technicien de maintenance √©lectrique',
                    'Technicien en maintenance √©lectronique / automatisme',
                    'Technicien en r√©frig√©ration et climatisation',
                    'Soudeur / M√©tallier industriel',
                    'Planificateur de maintenance',
                    'Technicien de maintenance m√©canique',
                    '√âlectricien industriel',
                    'Assistant technicien de maintenance',
                    'Technicien des pompes et syst√®mes d\'eau'
                ],
                'qualite': [
                    'Chef du d√©partement qualit√© / Contr√¥le qualit√©',
                    'Ing√©nieur qualit√©',
                    'Sp√©cialiste assurance qualit√©',
                    'Contr√¥leur de qualit√© (QA/QC)',
                    'Sp√©cialiste en s√©curit√© alimentaire',
                    'Technicien de laboratoire (analyse de l\'eau)',
                    'Inspecteur qualit√©'
                ]
            };
            
            // R√©initialiser le select des postes
            posteSelect.innerHTML = '<option value="">-- S√©lectionnez un poste --</option>';
            
            if (departement && postes[departement]) {
                // Afficher le groupe de postes
                posteGroup.style.display = 'block';
                
                // Ajouter les postes du d√©partement s√©lectionn√©
                postes[departement].forEach(poste => {
                    const option = document.createElement('option');
                    option.value = poste;
                    option.textContent = poste;
                    posteSelect.appendChild(option);
                });
                
                // Mettre √† jour le hint
                posteHint.textContent = `${postes[departement].length} poste(s) disponible(s) dans ce d√©partement`;
                
                // Rendre le champ obligatoire
                posteSelect.required = true;
            } else {
                // Cacher le groupe de postes
                posteGroup.style.display = 'none';
                posteSelect.required = false;
                posteHint.textContent = '';
            }
        }
    </script>
</body>
</html>
